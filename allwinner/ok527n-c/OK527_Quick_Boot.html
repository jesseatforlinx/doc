

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick Boot &mdash; Forlinx Embedded T527 Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=30170994" />

  
    <link rel="shortcut icon" href="_static/forlinx.png"/>
    <link rel="canonical" href="https://forlinxembedded.github.io/allwinner/ok527n-c/OK527_Quick_Boot.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Display Interface" href="OK527_Display_Interface.html" />
    <link rel="prev" title="Linux5.15.147_User’s Compilation Manual" href="OK527N-C_Linux5.15.47_User_Compilation_Manual.html" />
   

  <!-- Load Font Awesome from CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8EJPNL8NR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8EJPNL8NR');
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/forlinx-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOFTWARE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="OK527N-C_Linux5.15.47_User_Manual.html">Linux5.15.147_User’s Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK527N-C_Linux5.15.47_User_Compilation_Manual.html">Linux5.15.147_User’s Compilation Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">APPLICATION NOTE</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Boot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#copyright">Copyright</a></li>
<li class="toctree-l2"><a class="reference internal" href="#application-scope">Application Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="#methods-for-quick-boot">Methods for Quick Boot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OK527_Display_Interface.html">Display Interface</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Forlinx Embedded T527 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quick Boot</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-boot">
<h1>Quick Boot<a class="headerlink" href="#quick-boot" title="Link to this heading"></a></h1>
<p>Document classification: □ Top secret □ Secret □ Internal information ■ Open</p>
<section id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Link to this heading"></a></h2>
<p>The copyright of this manual belongs to Baoding Folinx Embedded Technology Co., Ltd. Without the written permission of our company, no organizations or individuals have the right to copy, distribute, or reproduce any part of this manual in any form, and violators will be held legally responsible.</p>
<p>Forlinx adheres to copyrights of all graphics and texts used in all publications in original or license-free forms.</p>
<p>The drivers and utilities used for the components are subject to the copyrights of the respective manufacturers. The license conditions of the respective manufacturer are to be adhered to. Related license expenses for the operating system and applications should be calculated/declared separately by the related party or its representatives.</p>
</section>
<section id="application-scope">
<h2>Application Scope<a class="headerlink" href="#application-scope" title="Link to this heading"></a></h2>
<p>This note is primarily applicable to the Linux 5.15 operating system on the Forlinx OKT527-C platform. Other platforms can also refer to it, but there may be differences between platforms, requiring modifications according to your actual requirements.</p>
</section>
<section id="methods-for-quick-boot">
<h2>Methods for Quick Boot<a class="headerlink" href="#methods-for-quick-boot" title="Link to this heading"></a></h2>
<p>The quick boot of T527 generally involves modifications to parts such as U-Boot environment variables and the kernel.<br />
<strong>(1) Optimization of U-Boot Quick Boot</strong></p>
<p>Modify the U-Boot environment variables. Change the delay bootdelay to 0 seconds to eliminate the waiting time for entering the U-Boot menu.</p>
<p>Open the following file:<br />
device/config/chips/t527/configs/okt527/longan/env.cfg</p>
<p>Find bootdelay = 1 and change it to bootdelay = 0.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#uboot system env config</span>
<span class="nv">bootdelay</span><span class="o">=</span><span class="m">0</span><span class="w">					</span>//Default<span class="w"> </span>delay<span class="w"> </span>is<span class="w"> </span><span class="m">1</span><span class="w"> </span>s,<span class="w"> </span>change<span class="w"> </span>to<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<p>Turn off the boot0 debug information printing. Modify the following file:</p>
<p>device/config/chips/t527/configs/okt527/sys_config.fex<br />
modify debug_mode to 0</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>product<span class="o">]</span>
<span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;527&quot;</span>
<span class="nv">machine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;okt527&quot;</span>

<span class="o">[</span>platform<span class="o">]</span>
<span class="nv">eraseflag</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="nv">debug_mode</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w">			</span>//Default<span class="w"> </span>is<span class="w"> </span><span class="m">1</span><span class="w"> </span>s,<span class="w"> </span>change<span class="w"> </span>to<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<p><strong>(2) Optimization of Kernel Quick Boot</strong></p>
<p>Reduce the collection of kernel printing information.</p>
<p>Open the following file:</p>
<p>kernel/linux-5.15/drivers/char/random.c</p>
<p>Change CRNG_READY in the last line of the following code to CRNG_EMPTY.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>static<span class="w"> </span>enum<span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="nv">CRNG_EMPTY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>,<span class="w"> </span>/*<span class="w"> </span>Little<span class="w"> </span>to<span class="w"> </span>no<span class="w"> </span>entropy<span class="w"> </span>collected<span class="w"> </span>*/
<span class="w">        </span><span class="nv">CRNG_EARLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>,<span class="w"> </span>/*<span class="w"> </span>At<span class="w"> </span>least<span class="w"> </span>POOL_EARLY_BITS<span class="w"> </span>collected<span class="w"> </span>*/
<span class="w">        </span><span class="nv">CRNG_READY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w">  </span>/*<span class="w"> </span>Fully<span class="w"> </span>initialized<span class="w"> </span>with<span class="w"> </span>POOL_READY_BITS<span class="w"> </span>collected<span class="w"> </span>*/
<span class="o">}</span><span class="w"> </span>crng_init<span class="w"> </span><span class="nv">__read_mostly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>CRNG_EMPTY<span class="p">;</span>
<span class="c1">#define crng_ready() (likely(crng_init &gt;= CRNG_EMPTY))	//默认为CRNG_READY，改为CRNG_EMPTY</span>
</pre></div>
</div>
<p>Modify the serial port printing priority.</p>
<p>Open the following file:<br />
device/config/chips/t527/configs/okt527/longan/env.cfg</p>
<p>Modify loglevel to 0</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">init</span><span class="o">=</span>/init
<span class="nv">loglevel</span><span class="o">=</span><span class="m">0</span><span class="w">			</span>//Default<span class="w"> </span>is<span class="w"> </span><span class="m">8</span><span class="w"> </span>s,<span class="w"> </span>change<span class="w"> </span>to<span class="w"> </span><span class="m">0</span>
<span class="nv">selinux</span><span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
<p><strong>(3) Optimization of File System Startup</strong></p>
<p>Trim unnecessary services that start automatically at boot to reduce the startup time.</p>
<p>Open the following file:</p>
<p>buildroot/buildroot-202205/package/allwinner/post_build.sh</p>
<p>Delete the /etc/preinit service by commenting out the following 7 lines.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>add_preinit_to_inittab<span class="o">(){</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-e<span class="w"> </span><span class="si">${</span><span class="nv">TARGET_DIR</span><span class="si">}</span>/etc/inittab<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span><span class="c1">#insert preinit</span>
<span class="c1">#               grep &quot;::sysinit:/etc/preinit&quot; ${TARGET_DIR}/etc/inittab &gt;/dev/null</span>
<span class="c1">#                if [ $? -eq 0 ]; then</span>
<span class="c1">#                        echo &quot;preinit is already in inittab!&quot;</span>
<span class="c1">#                else</span>
<span class="c1">#                        echo &quot;preinit is not in inittab, add it!&quot;</span>
<span class="c1">#                        sed -i &#39;/Startup the system/a ::sysinit:/etc/preinit&#39; ${TARGET_DIR}/etc/inittab</span>
<span class="c1">#                fi		*/</span>
<span class="w">                </span><span class="c1">#commented ttyS0, insert /bin/sh</span>
</pre></div>
</div>
<p>You can also delete unnecessary services, such as the Bluetooth service. Delete platform/forlinx/overlay_rootfs/etc/init.d/S40nxp, or rename it to 40nxp so that this service will not start.</p>
<p>After the modifications are completed, save the changes and exit. Then perform a full compilation, package the image, and burn it to the board. After making the above modifications, the boot test shows that the device can start up in about 7 - 8 seconds.</p>
</section>
</section>


           </div>
          </div>
          <div class="forlinx-footer-social" style="margin-top: 15px; padding: 0 16px;">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">

    <!-- 左侧版权信息 -->
    <span style="font-size: 14px; color: #444;">
      © <a href="https://www.forlinx.net/" target="_blank" style="color: inherit; text-decoration: none;">Forlinx Embedded</a>
    </span>

    <!-- 右侧社交图标 -->
    <div>
      <a href="https://www.facebook.com/Forlinx-Embedded-177890724336237" target="_blank">
        <i class="fab fa-facebook fa-lg" style="margin: 0 6px; color:#3b5998;"></i>
      </a>
      <a href="https://www.linkedin.com/company/forlinx-embedded-technology-co-ltd/" target="_blank">
        <i class="fab fa-linkedin fa-lg" style="margin: 0 6px; color:#0077b5;"></i>
      </a>
      <a href="https://x.com/ForlinxOfficial" target="_blank">
        <i class="fab fa-x-twitter fa-lg" style="margin: 0 6px; color:#000;"></i>
      </a>
      <a href="https://www.youtube.com/@forlinxembedded" target="_blank">
        <i class="fab fa-youtube fa-lg" style="margin: 0 6px; color:#FF0000;"></i>
      </a>
      <a href="https://github.com/ForlinxEmbedded" target="_blank">
        <i class="fab fa-github fa-lg" style="margin: 0 6px; color:#333;"></i>
      </a>
      <a href="https://www.forlinx.net/" target="_blank">
        <i class="fas fa-globe fa-lg" style="margin: 0 6px; color:#2274A5;"></i>
      </a>
    </div>

  </div>
</div>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>